{% extends "blog/base.html" %}
{% block content %}
    <div class="content-section">
        <div style="display: flex; justify-content: center; align-items: center;">
            <div style="flex: 1; text-align: right;">
                <h2>{{ post.author }}</h2>
            </div>
            <div style="width: 10%; text-align: center;">
                <h2>VS</h2>
            </div>
            <div style="flex: 1; text-align: left;">
                <h2>The other player</h2>
            </div>
        </div>
        <div style="text-align: center; margin-bottom: 25px;">
            {% if post.is_public == False %}
                <small>The game access code is: {{ post.access_code }}</small>
            {% endif %}
        </div>

        <!-- zone de jeu -->
        <div style="display: flex; justify-content: center; align-items: center;">
            <table>
                {% for row in nbCases %}
                <tr>
                    {% for col in nbCases %}
                    <td>
                        <img style="width: 50px; height: 50px;" id="BlockImg{{ col }}_{{ row }}" onclick="handleClick({{ row }}, {{ col }})">
                    </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>

    <script>
        var currentPlayer = 'X';
        var movesCount = 0;

        function handleClick(row, col) {
            var Img = document.getElementById('BlockImg' + col + '_' + row);

            if (Img.src === '') {
                if (currentPlayer === 'X') {
                    Img.src = '{{ post.author.profile.symbol.url }}';
                } else {
                    Img.src = '{{ user.profile.symbol.url }}';
                }

                movesCount++;
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            }
        }
    </script>

{% endblock content %}